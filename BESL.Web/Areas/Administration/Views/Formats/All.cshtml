@model  BESL.Application.Formats.Queries.GetAll.GetAllTournamentFormatsQueryViewModel
@{ 
    Layout = null;
}
<div class="border rounded">
    <div class="container-fluid mt-2 mb-3">
        <form id="createGameForm" data-ajax="true" data-ajax-loading="#spinner" data-ajax-url="/Administration/Games/Create" data-ajax-method="GET" data-ajax-success="$.validator.unobtrusive.parse(gameCreateForm)" data-ajax-update="#mainContentContainer"></form>
        <form id="refreshGamesForm" data-ajax="true" data-ajax-loading="#spinner" data-ajax-url="/Administration/Games/All" data-ajax-method="GET" data-ajax-update="#mainContentContainer"></form>
        <form id="tournamentFormats" data-ajax="true" data-ajax-loading="#spinner" data-ajax-url="/Administration/Formats/Create" data-ajax-method="GET" data-ajax-success="$.validator.unobtrusive.parse(formatCreateForm)" data-ajax-update="#mainContentContainer"></form>
        <button class="btn btn-success mb-3" form="createGameForm"><i class="fas fa-plus-circle"></i>&nbsp;Add a game</button>
        <button class="btn btn-primary mb-3" form="refreshGamesForm"><i class="fas fa-redo-alt"></i>&nbsp;Refresh games list</button>
        <button class="btn btn-primary mb-3" form="tournamentFormats"><i class="fas fa-chess"></i>&nbsp;Tournament formats</button>
        <table class="table table-hover rounded shadow">
            <thead class="thead-dark rounded">
                <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Name</th>
                    <th scope="col">Game</th>
                    <th scope="col">Registered teams</th>
                    <th scope="col" class="text-center"><i class="fas fa-cogs"></i></th>
                    <th scope="col" class="text-center"><i class="fas fa-trash-alt"></i></th>
                </tr>
            </thead>
            <tbody>
                @if (Model.TournamentFormats.Count() > 0)
                {
                    @foreach (var tournamentFormat in Model.TournamentFormats)
                    {
                        <tr>
                            <th scope="row">@tournamentFormat.Id</th>
                            <td>@tournamentFormat.Name</td>
                            <td>@tournamentFormat.Game</td>
                            @*<td>@tournamentFormat.RegisteredTeams</td>*@
                            <td class="text-center">
                                <form data-ajax="true" data-ajax-loading="#spinner" data-ajax-url="Administration/Games/Modify/@tournamentFormat.Id" data-ajax-method="GET" data-ajax-success="$.validator.unobtrusive.parse(gameModifyForm)" data-ajax-update="#mainContentContainer">
                                    <button class="btn btn-info align-center"><i class="fas fa-wrench"></i>&nbsp;Modify</button>
                                </form>
                            </td>
                            <td class="text-center">
                                <form data-ajax="true" data-ajax-loading="#spinner" data-ajax-url="Administration/Games/Delete/@tournamentFormat.Id?gameName=@tournamentFormat.Name" data-ajax-method="POST" data-ajax-confirm="Are you sure you want to delete @tournamentFormat.Name ?" data-ajax-update="#mainContentContainer">
                                    <button class="btn btn-danger btn-"><i class="fas fa-times-circle"></i>&nbsp;Delete</button>
                                </form>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="6" class="text-center"><h5>No games registered.</h5></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>